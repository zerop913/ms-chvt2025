import { DocsPageData } from "@/types/docs";

export const voiceSearchRunningPageData: DocsPageData = {
  title: "Запуск приложения голосового поиска",
  description:
    "Финальный этап мастер-класса: запуск и тестирование голосового поиска товаров",
  steps: [
    {
      title: "Запуск сервера разработки",
      description: "Запустим Next.js приложение в режиме разработки",
      sections: [
        {
          type: "alert" as const,
          icon: "Target",
          title: "Финишная прямая!",
          description:
            "Вы почти завершили создание полноценной системы с голосовым поиском. Осталось только запустить приложение и протестировать его работу",
          data: {
            type: "success",
          },
        },
        {
          type: "stepList" as const,
          icon: "Play",
          title: "Команда запуска",
          description: "Запустим сервер разработки Next.js",
          data: [
            "Убедитесь что терминал открыт в папке проекта search-api-chvt",
            "Выполните команду запуска сервера разработки: npm run dev",
            "Дождитесь сообщения о том, что сервер запущен",
            'Вы должны увидеть: "✓ Ready in 2.3s" и "Local: http://localhost:3000"',
          ],
        },
        {
          type: "codeBlock" as const,
          icon: "Terminal",
          title: "Ожидаемый вывод",
          description: "Пример успешного запуска приложения",
          data: {
            language: "bash",
            code: `✓ Ready in 2.3s
○ Local:        http://localhost:3000
○ Network:      http://192.168.1.100:3000

✓ Starting...
✓ Ready in 1.2s`,
          },
        },
      ],
    },
    {
      title: "Проверка работы приложения",
      description: "Убедимся что интерфейс загружается корректно",
      sections: [
        {
          type: "stepList" as const,
          icon: "Globe",
          title: "Открытие в браузере",
          description: "Протестируем загрузку пользовательского интерфейса",
          data: [
            "Откройте веб-браузер (Chrome, Firefox, Edge)",
            "Перейдите по адресу: http://localhost:3000",
            "Должна загрузиться страница с интерфейсом поиска",
            "Проверьте что нет ошибок в консоли браузера (F12)",
          ],
        },
        {
          type: "stepList" as const,
          icon: "CheckCircle",
          title: "Проверка элементов интерфейса",
          description: "Убедимся что все компоненты отображаются",
          data: [
            "Поле для ввода поискового запроса",
            "Кнопка голосового ввода (микрофон)",
            "Кнопка обычного поиска",
            "Область для отображения результатов",
          ],
        },
      ],
    },
    {
      title: "Тестирование текстового поиска",
      description: "Проверим работу поиска через текстовый ввод",
      sections: [
        {
          type: "stepList" as const,
          icon: "Search",
          title: "Выполнение поискового запроса",
          description: "Проверим подключение к 1С API",
          data: [
            'В поле поиска введите название товара (например: "компьютер")',
            "Нажмите кнопку поиска или клавишу Enter",
            "Должны появиться результаты поиска из вашего 1С",
            "Проверьте что отображается информация о товарах: название, цена, категория",
          ],
        },
        {
          type: "text" as const,
          icon: "AlertTriangle",
          title: "Если поиск не работает",
          description:
            "Возможные причины: 1) Apache не запущен, 2) 1С HTTP-сервисы не опубликованы, 3) Неправильный URL в настройках (.env.local), 4) CORS ошибки. Проверьте консоль браузера для деталей ошибок",
        },
      ],
    },
    {
      title: "Тестирование голосового поиска",
      description: "Проверим работу голосового ввода",
      sections: [
        {
          type: "stepList" as const,
          icon: "Mic",
          title: "Настройка микрофона",
          description: "Подготовим устройство для голосового ввода",
          data: [
            "Убедитесь что микрофон подключен и работает",
            "Нажмите кнопку микрофона в интерфейсе",
            "Разрешите доступ к микрофону в браузере",
            "Должна появиться анимация записи голоса",
          ],
        },
        {
          type: "stepList" as const,
          icon: "Volume2",
          title: "Выполнение голосового запроса",
          description: "Протестируем распознавание речи",
          data: [
            "Четко произнесите название товара в микрофон",
            "Говорите медленно и внятно",
            "Должен появиться распознанный текст в поле ввода",
            "Поиск должен выполниться автоматически",
          ],
        },
      ],
    },
    {
      title: "Проверка результатов",
      description: "Убедимся что система работает полностью",
      sections: [
        {
          type: "stepList" as const,
          icon: "TestTube",
          title: "Полное тестирование системы",
          description: "Проверим весь цикл работы приложения",
          data: [
            "Попробуйте поиск разных категорий товаров",
            "Протестируйте как текстовый, так и голосовой ввод",
            "Проверьте корректность отображения данных из 1С",
            "Убедитесь что поиск работает быстро (до 2-3 секунд)",
          ],
        },
        {
          type: "parameterGrid" as const,
          icon: "CheckSquare",
          title: "Чек-лист функциональности",
          description: "Список функций которые должны работать",
          data: [
            {
              name: "Загрузка интерфейса",
              type: "boolean",
              description: "✓ Страница открывается без ошибок",
            },
            {
              name: "Текстовый поиск",
              type: "boolean",
              description: "✓ Поиск товаров по названию",
            },
            {
              name: "Голосовой ввод",
              type: "boolean",
              description: "✓ Распознавание речи работает",
            },
            {
              name: "Подключение к API",
              type: "boolean",
              description: "✓ Данные загружаются из 1С",
            },
            {
              name: "Отображение результатов",
              type: "boolean",
              description: "✓ Товары показываются корректно",
            },
          ],
        },
      ],
    },
    {
      title: "Устранение проблем",
      description: "Решение возможных ошибок",
      sections: [
        {
          type: "codeBlock" as const,
          icon: "Bug",
          title: "Диагностика проблем",
          description: "Команды для выявления и устранения ошибок",
          data: {
            language: "bash",
            code: `# Проверка статуса Apache
curl http://localhost/api/chvt

# Перезапуск Next.js приложения
npm run dev

# Проверка логов
npm run build
npm start

# Очистка кэша
rm -rf .next
npm run dev`,
          },
        },
        {
          type: "text" as const,
          icon: "HelpCircle",
          title: "Частые проблемы",
          description:
            "1) Ошибка CORS - проверьте настройки Apache, 2) Микрофон не работает - разрешите доступ в браузере, 3) Нет данных - убедитесь что 1С запущена и HTTP-сервисы активны, 4) Медленный поиск - оптимизируйте запросы в 1С",
        },
      ],
    },
  ],
  navigation: {
    prev: {
      href: "/docs/voice-search/setup",
      title: "Настройка приложения",
    },
    next: {
      href: "/docs",
      title: "Начало работы",
    },
  },
  highlight: {
    title: "🎉 Поздравляем! Система готова!",
    description:
      "Вы успешно создали полноценную систему голосового поиска с интеграцией 1С! Теперь у вас есть работающий API, веб-интерфейс с голосовым вводом и связь между всеми компонентами. Система готова к использованию и дальнейшему развитию",
    tags: ["Завершение", "Голосовой поиск", "1С", "Next.js", "Готово!"],
  },
};
